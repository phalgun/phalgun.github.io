"use strict";var StackExchangeDevStory;!function(){var e=function(e,t,n,i){if(e.length){var r=StackOverflow.Models.Story.UserStoryItemTypeId[n.attr("data-typeid")];if(void 0==r)return;e.typeWatch({"highlight":!1,"wait":500,"captureLength":-1,"callback":function(){var a=e.closest("form");e.closest(".coverable-input.input-loader").addClass("loading"),$.ajax({"type":"POST","url":"/users/story/"+StackExchange.user.options.userId+"/search-lists-autocomplete","data":{"query":e.val(),"fkey":StackExchange.options.user.fkey,"itemType":r}}).done(function(r){var o=e.closest(".autocomplete");o.find(".autocomplete-suggestions-list").remove(),e.closest(".coverable-input.input-loader").removeClass("loading");var s=$(r).insertAfter(e).on("click",".autocomplete-suggestion, .autocomplete-default",function(e){var r=$(e.currentTarget);if(r.hasClass("autocomplete-default"))return a.find(t).focus(),!1;var o=r.data("list-id"),s=r.find(".autocomplete-suggestion-match").text(),l=r.find(".autocomplete-suggestion-image [data-url]").data("url"),c=r.find(".autocomplete-suggestion-url").text();return i&&i(n,{"name":s,"imageUrl":l,"url":c,"listId":o}),a.find(t).focus(),!1});e.is(":focus")||s.hide()})}})}},t=(function(){function e(){this._newItems=null,this._addItemIsVisible=!1,this._editStarted=!1,this._loadingForm=!1,this._mustUse=$(".additem-body").length>0}return Object.defineProperty(e.prototype,"mustUse",{"get":function(){return this._mustUse},"enumerable":!0,"configurable":!0}),Object.defineProperty(e.prototype,"isAddingItem",{"get":function(){return this._addItemIsVisible},"enumerable":!0,"configurable":!0}),e.prototype.afterSaveOrCancel=function(){this.mustUse&&this._hideAddItemForm()},e.prototype._hideAddItemForm=function(){$("#add-new-item-form").html("").css({"margin-top":"","left":""}).removeClass("with-upper-arrow").addClass("empty-add-new-item-form"),$("#page-cover").hide(),$(".tooltip").show(),this._clickedButton.css({"background":"","z-index":"initial"}),this._addItemIsVisible=!1},e.prototype.init=function(){var e=this;if(this.mustUse){var t=function(t){return e._addItemIsVisible&&!e._editStarted&&e._hideAddItemForm(),t.preventDefault(),!1};$("#page-cover").on("click",function(e){return t(e)}),$("#add-new-item-form").on("click",function(e){return"add-new-item-form"===e.target.id?t(e):!0}),$("#show-more-item-types-button").on("click",function(){$("#more-add-item-buttons").show()}),this._addItem=$(".additem-body"),$(document).keyup(function(t){e._addItemIsVisible&&(27!==t.keyCode||e._editStarted?e._editStarted=!0:e._hideAddItemForm())}),$(document).on("click",".additem-body .-item",function(t){if("show-more-item-types-button"===t.target.closest("li").id)return $(".initially-hidden").css("visibility","visible"),$("#show-more-item-types-button").hide(),void 0;if(e._addItemIsVisible)return e._hideAddItemForm(),void 0;if(!e._loadingForm){var n=$(t.target.closest(".-item")).attr("data-add-item-link");n&&(e._loadingForm=!0,$.ajax(n).done(function(n){e._loadingForm=!1;var i=$(n);i.addClass("nopseudos"),$("#page-cover").show(),$("#add-new-item-form").append(i).addClass("with-upper-arrow").css("z-index","1000");var r=$(t.target).closest(".-item"),a=$("#item-add");e._clickedButton=r;var o,s,l=$("#item-add").css("background-color"),c=r.position().top-58,u=$("#add-item-buttons-container").width()/2;r.position().left+r.width()<u?(o=r.position().left,s=r.width()/2):(o=r.position().left+r.width()-a.outerWidth(),s=a.outerWidth()-r.width()/2),$("#add-new-item-form").append("<style>#add-new-item-form::before{ border-bottom-color: "+l+"; left:"+s+"px}</style>").removeClass("empty-add-new-item-form"),$("#add-new-item-form .timeline-item").css({"border":"0"}),$("#add-new-item-form").css({"margin-top":c,"left":o}),$(".tooltip").hide(),r.css({"background":"white","z-index":1e3}),$(".item-cancel-button").on("click",function(t){return t.preventDefault(),e._hideAddItemForm(),!1}),e._addItemIsVisible=!0,e._editStarted=!1}))}})}},e}(),!1);StackExchange.user.initTimeline=function(){if(!t){t=!0,$(document).on("click",".timeline form :submit, .job-requirements-form :submit",function(e){$(e.target).data("clicked",!0)}),$(document).on("submit",".timeline form, .job-requirements-form",function(e){var t=$(e.target);t.find(":submit[name][value]").each(function(e,n){var i=$(n);if(i.data("clicked")){i.data("clicked",null);var r=t.find('input[name="'+i.attr("name")+'"]').not(":submit");r.length||(r=$("<input>").attr({"type":"hidden","name":i.attr("name")}).addClass("js-submit").appendTo(t)),r.val(i.attr("value"))}})});var n=function(e){$(".description-expander",e).parent().each(function(e,t){var n=$(t),i=n.find(".description-expander"),r=n.find(".description-content-truncated"),a=n.find(".description-content-full"),o=i.is(":checked")?a:r,s=r.data("max-height")||parseInt(r.css("max-height"));r.data("max-height",s);var l=a.attr("style");a.css({"visbility":"hidden","display":"block"});var c=a.outerHeight(!1);if(a.attr("style",l?l:""),c>s){var u=o.children();u=u.add(u.find("a, b, i, strong, em, li"));for(var d=Math.min(s,$(u[0]).outerHeight(!1)),p=o.offset().top,f=1;f<u.length;f++){var h=$(u[f]),g=h.offset().top-p,m=h.outerHeight(!1),v=g+m;s>v&&(d=Math.max(d,v))}r.css("max-height",d+"px")}s>c?n.removeClass("description-ellipsis"):n.addClass("description-ellipsis")})};n();var i=function(){var e,t,n=null,i=function(e,i,r){n=$(e).children(".list-card"),n.css({"display":"flex","left":i,"top":r}),t=!0,$(n).hover(function(){n.stop(!0,!0).css("display","flex")},function(){n.css("display","none"),t=!1})};$(document).on("mouseenter",".js-listcard-hover",function(n){var r=n.currentTarget,a=r.offsetParent.offsetWidth,o=r.offsetLeft/a*100+"%",s=r.offsetParent.offsetHeight,l=r.offsetTop/s*100+"%",c=$(r).attr("data-list-url"),u=$(r).closest(".timeline-item-content").children(".js-listcard-container:first");0===$(u).children().length?setTimeout(function(){e=c,$.ajax({"url":c,"type":"GET","dataType":"html"}).success(function(n){$(u).html(n),t||e!==c||i(u,o,l)})},0):i(u,o,l)}),$(document).on("mouseleave",".js-listcard-hover",function(){$(n).delay(100).fadeOut("fast"),t=!1})};i();var r=function(t){if(!t.data("initialized")){t.data("initialized",!0);var i=t.find(".js-tag-editor");i.length&&StackExchange.using("tagEditor",function(){i.each(function(e,t){StackExchange.tagEditor($(t),null,void 0,{"excerpts":!1,"tagMenus":!0,"multiLine":$(t).hasClass("multi-line")})})});var r=t.find(".autocomplete .autocomplete-input");e(r,"input[name='Title']",t,s),r.length&&t.find(".company-tag .delete-tag").click(function(e){$(e.currentTarget).closest(".input-cover").remove(),t.find("input[name='Company'], input[name='Url'], input[name='LogoUrl'], input[name='School'], input[name='ImageUrl']").prop("disabled",!1).eq(0).focus(),t.find("input[name='ListId']").remove(),t.find(".img.logo").removeClass("disabled").addClass("js-img-edit"),t.find(".img .remove").removeClass("dno").addClass("js-img-remove")});var a=t.filter("#form-section-PersonalInfo");if(a.length){var o=!0,l=$(".privacy-helper").data("is-public");a.find(".privacy-wrapper").each(function(e,t){var n=$(t),i=n.find(".privacy-checkbox"),r=i.find("input:checkbox"),a=i.data("target-id"),s=n.find("#"+a),c=!1;r.is(":checked")||(c=!0,o=!1);var u=function(){o&&l||(c=!0,i.show())},d=function(){i.hide()};n.on("focusout",function(){window.setTimeout(function(){$(document.activeElement).closest(n).length||d()},2)}),s.on("keydown",function(){return u()}).on("focus",function(){c&&u()})})}var c=a.find("#form-section-PersonalInfo-Location");if(c.length){var u=t.find("#form-section-PersonalInfo-LocationPlaceId");if(c.typeWatch({"wait":0,"callback":function(){u.val("")},"highlight":!1,"captureLength":-1}),google&&google.maps){var d=new google.maps.places.Autocomplete(c[0],{"types":["geocode"]});d.addListener("place_changed",function(){u.val("G:"+d.getPlace().place_id)})}}var p=t.find(".textarea-with-counter textarea");p.length&&p.each(function(e,t){var n=$(t);n.charCounter({"min":StackExchange.options.story.minCompleteBodyLength,"max":4e3,"target":n.closest(".textarea-with-counter").find(".-counter-span"),"ignoreWhitespace":!0,"setIsValid":function(e){var t=n.next(".-counter");t.toggleClass("-success",e),t.toggleClass("-fail",!e),t.find(".-counter-span").toggleClass("dno",e),t.find(".-success-span").toggleClass("dno",!e)}}),n.val()&&n.trigger("charCounterUpdate")}),n(t)}};$(".timeline-item, .header-edit-section").each(function(e,t){r($(t))});var a=function(e,t){var n;if(e&&null!=(n=t.data("order-by"))){for(var i=e.siblings().filter("[data-order-by]").toArray(),a=null,o=0;o<i.length;o++){var s=$(i[o]);if(s.data("order-by")<n){a=s;break}}a?t.insertBefore(a):t.appendTo(".timeline-feed")}else e?t.insertBefore(e):t.insertBefore(".timeline-feed .timeline-item:first");if(e){var l=e.data("next-focus");if(!l){var c=e.find("input:focus");c.length&&(l=c.attr("name"))}l&&t.find("input[name='"+l+"']").focus(),e.remove()}r(t)},o={"get":function(e){"#"!==e.charAt(0)&&(e="#"+e);var t=this[e];return delete this[e],t.find(".js-loader").removeClass("loading"),t},"put":function(e){if(e){var t="#"+e.attr("id");this[t]=e}}},s=function(e,t){var n=f($(e).find(".js-img-edit"));if(t.imageUrl?n.setImage(t.imageUrl):n.empty(),$(e).find("input[name='Url']").val(t.url),$(e).find("input[name='Company']").val(t.name),$(e).find("input[name='School']").val(t.name),t.listId){var i=$(e).closest("form"),r=$("<input type='hidden' name='ListId' />").val(t.listId),a=$("<input type='hidden' name='ListClicked' />").val("true");i.find("input[name='ListId']").remove().end().append(r).find("input[name='ListClicked']").remove().end().append(a),i.submit()}$(e).data("next-focus","Title")},l=function(e){var t=$(e).parent().find("[name='Company']").val(),n=$(e).closest("form");$.ajax({"type":"POST","url":"/users/story/"+StackExchange.user.options.userId+"/suggest-company-lists","data":{"name":t,"fkey":StackExchange.options.user.fkey,"itemType":StackOverflow.Models.Story.UserStoryItemTypeId.Job}}).done(function(t){$(t).insertAfter(e).on("click",".list-suggestion",function(e){var t=$(e.currentTarget),i=t.data("list-id"),r=t.find("list-suggestion-match").text(),a=t.find(".list-suggestion-image [data-image-url]").data("image-url"),o=t.find("list-suggestion-item [data-url]").data("url");return s(t,{"name":r,"imageUrl":a,"url":o,"listId":i}),n.find("input[name='Title']").focus(),!1}),n.on("keydown","input[name='Company']",function(){$(e).next().is(".message.incomplete.block")&&$(e).next().remove()})})},c=function(e){e.preventDefault();var t,n=$(e.target);if(n.attr("data-adds-item")){t=$("#item-add"),t.length||(t=null);var i=o.get("#item-add");t&&i&&(t.replaceWith(i),t=i)}else t=n.closest(".timeline-item");o.put(t),u(n).done(function(e){var i=$(e);i.find(".js-list-suggestion-container").length&&l(i.find(".js-list-suggestion-container")),a(t,i),n.attr("data-scroll-to")&&i[0].scrollIntoView(!0)})},u=function(e){var t="submitting";return e.hasClass(t)?$.Deferred().promise():(e.addClass(t),$.ajax({"type":e.attr("method")||"GET","url":e.attr("action")||e.attr("href"),"data":e.is("form")?e.serialize():null}).always(function(){e.removeClass(t),e.find(".js-submit").remove(),e.find(".js-loader").removeClass("loading")}))};$(document).on("click",".js-loader",function(e){$(e.target).closest(".js-loader").addClass("loading")}),$(document).on("click",".timeline .timeline-item .item-edit-button a",c),$(document).on("click",".timeline .timeline-item.placeholder a.js-add-link",c),$(document).on("submit",".timeline .timeline-item.add form",c),$(document).on("click",".timeline .timeline-item a.item-cancel-button",function(e){var t=e.target,n=$(t),i=n.closest(".timeline-item"),r=o.get(t.hash);r&&(a(i,r),e.preventDefault())}),$(document).on("click",".js-og-request",function(e){e.preventDefault();var t=$.trim($("input[name=Url]").val()),n=$(e.currentTarget).closest("form");if(!t.length)return n.submit();/^https?:/.test(t)||(t="http://"+t);var i=d(t,n),r=i.fail(function(){var e=t.replace("http://","https://");return d(e,n)});r.then(function(e){$(n).find(".js-og-title").val(e.hybridGraph.title),$(n).find(".js-og-image-url").val(e.hybridGraph.image),$(n).find(".js-og-description").val(e.hybridGraph.description),$(n).submit()},function(){$(n).submit()})});var d=function(e){var t="https://opengraph.io/api/1.0/site/"+encodeURIComponent(e)+"?app_id="+StackExchange.settings.userProfile.openGraphAPIKey;return $.ajax({"dataType":"json","url":t}).then(function(e){return e.error?$.Deferred().reject(new Error(e.error)):e})};$(document).on("submit",".timeline .timeline-item.edit form",function(e){e.preventDefault();var t=$(e.target),n=t.closest(".timeline-item"),i=n.is("#item-add"),r=$(e.target);u(r).done(function(e){var t=$(e);i&&!t.is("#item-add")&&o.get("#item-add").insertBefore(n),a(n,t),v(t)})}),$(document).on("submit",".timeline .timeline-item .item-delete-button form",function(e){e.preventDefault();var t=$(e.target);t.closest(".timeline-item").find(".timeline-item-warning").css("display","flex")}),$(document).on("click",".timeline .timeline-item .timeline-item-warning a.js-btn-warning",function(e){$(e.currentTarget).closest(".timeline-item-warning").hide()}),$(document).on("click",".timeline .timeline-item .timeline-item-warning a.js-btn-confirm",function(e){var t=$(e.currentTarget).closest(".timeline-item").find(".item-delete-button form");u(t).done(function(){var e=t.closest(".timeline-item");e.fadeOutAndRemove(),v(e)})}),$(document).on("change","input[type=checkbox][data-current-for]",function(e){var t=$(e.target),n=$("#"+t.data("current-for"));n.prop("disabled",t.is(":checked")?"disabled":null),n.is("fieldset")&&n.find("select,input").prop("disabled",t.is(":checked")?"disabled":null)});var p=function(e){var t=$(e.target).closest(".autocomplete").find(".autocomplete-suggestions-list").show();$(".autocomplete-suggestions-list").not(t).hide()};$(document).on("click","body",p),$(document).on("focus","body",p),$(document).on("keydown",".autocomplete",function(e){switch(e.which){case 27:var t=$(e.target).closest(".autocomplete");t.find(".autocomplete-suggestions-list").remove(),t.find(".autocomplete-input").focus()}});var f=function(e){var t=$(e),n=t.find("input"),i=t.find("img").not(".js-img-empty"),r={"empty":function(){t.find(".js-img-empty").removeClass("dno"),t.find(".js-img-preview").addClass("dno"),n.val("")},"showDialog":function(){StackExchange.imageUploader.createImageUploadBackground(),StackExchange.imageUploader.uploadImageDialog(function(e){e&&r.setImage(e),StackExchange.imageUploader.removeImageUploadBackground()})},"setImage":function(e){e?(n.val(e),i.attr("src",e),t.find(".js-img-empty").addClass("dno"),t.find(".js-img-preview").removeClass("dno")):r.empty()}};return r};$(document).on("click",".timeline .js-img-edit",function(e){e.preventDefault();var t=$(e.target),n=f(t.closest(".js-img-edit"));t.closest(".js-img-remove").length?n.empty():n.showDialog()});var h=function(e){e.preventDefault();var t=$(e.target),n=t.closest(".header-edit-section");o.put(n),u(t).done(function(t){var i=$(t);i.insertAfter(n),n.remove(),e.focus&&i.find(e.focus).focus(),r(i)})};$(document).on("click","a.header-edit-btn-ajax",h),$(document).on("click",".header-edit-section-open a.header-cancel",function(e){var t=$(e.target),n=t.closest(".header-edit-section"),i=o.get(n.attr("id"));i&&(e.preventDefault(),i.insertAfter(n),n.remove())}),$(document).on("submit",".header-edit-section-open form",function(e){e.preventDefault();var t=$(e.target),n=t.closest(".header-edit-section"),i=$(e.target);u(i).done(function(e){var t=$(e);t.insertAfter(n),n.remove(),v(t),r(t)})});var g=function(){var e=null,t=function(e){e.removeClass("sticky").removeClass("sticky-bottom")},n=function(){if(e){var n=$(window).scrollTop();n>e.top()?(e.target.addClass("sticky"),n>e.bottom()?e.target.addClass("sticky-bottom"):e.target.removeClass("sticky-bottom")):(t(e.target),e.updateTop())}},i=function(){var n,i,r,a=$(".job-requirements-form"),o=$(".timeline-wrapper"),s=$(".timeline-sidebar"),l=a.add(s);if(s.length){if(s.is(":empty"))return s.remove(),void 0;t(l),a.length&&o.length?(i=a.outerHeight(!0),e={"top":function(){return n},"bottom":function(){var e=o.outerHeight(!0),t=r+e;return t-i},"updateTop":function(){r=o.offset().top,n=a.offset().top},"target":l},e.updateTop()):e=null}};return $(window).on("scroll resize load",n),i}();g();var m=function(e){e=$(e);var t=$(".timeline-sidebar");t.length&&t.remove(),t=$(".timeline-wrapper"),e.appendTo(t),g(),e.find(".job-requirements").is(".js-complete")?$(".timeline").removeClass("requirements-for-jobs"):$(".timeline").addClass("requirements-for-jobs")};$(document).on("submit",".job-requirements-form",function(e){e.preventDefault();var t=$(e.target);u(t).done(m)}),$(document).on("click",".job-requirements .js-min-complete-list a.js-requirement",function(e){var t=$(e.target).closest("a"),n=$(t.attr("data-target")),i=t.data("category"),r=t.data("search-status");if(i&&StackExchange.using("gps",function(){StackExchange.gps.track("min-complete-prompt.click",{"Item":i,"Status":r})}),n.length){$("html,body").animate({"scrollTop":n.offset().top-20});var a=t[0].hash,o=n.find(".header-edit-btn-ajax");if(n.is("#item-add")){var s=n.find(t.attr("data-update-trigger"));s.removeClass("blink"),window.setTimeout(function(){s.addClass("blink")},0)}else"Experience"===i?$(n).find(".item-edit-button a").click():o.length?h($.extend({},e,{"target":o,"focus":a})):n.find(a).focus();e.preventDefault()}});var v=function(e){{var t=!1;$(".job-requirements .js-min-complete-list a[data-update-trigger]").each(function(n,i){t=t||e.is($(i).attr("data-update-trigger"))})}t&&$(".job-requirements-form").submit()},b=function(e){return $.ajax({"type":"POST","url":"/users/story/toggle-min-complete-sidebar/"+StackExchange.user.options.userId,"data":{"fkey":StackExchange.options.user.fkey,"hideCompleted":e}})};$(document).on("click",".js-toggle-completed-requirements",function(){var e=$(".js-toggle-completed-requirements").hasClass("is-visible");b(e).always(function(){$(".js-requirement.is-finished").closest("li").toggleClass("dno"),$(".js-toggle-completed-requirements").toggleClass("is-visible is-hidden").text(e?"Show completed":"Hide completed")})}),$(document).on("submit",".js-onboarding-complete",function(e){e.preventDefault();var t=$(e.target);u(t).done(function(e){for(var t in e)if(e.hasOwnProperty(t)){var n=$("#"+t),i=$(e[t]);i.is(".timeline-sidebar")?m(i):a(n,i)}})}),$(document).on("click",".tag-wrapper .js-tag-toggle",function(e){e.preventDefault();var t=$(e.currentTarget);t.closest(".tag-wrapper-item").find(".more").toggleClass("dno"),t.text("more"===t.text()?"fewer":"more")}),$(document).on("submit","form.import-careers-cv-form",function(){return confirm("This will erase your existing Developer Story and recreate it based on your Careers CV. Continue?")})}};var n=!1;StackExchange.user.initOnboarding=function(t){if(!n){n=!0;var i={},r=(t.searchStatus,t.userId),a=function(e){if(!i[e]){var t=$(e);StackExchange.using("tagEditor",function(){initTagRenderer([""],[""]),StackExchange.tagEditor(t,void 0,void 0,{"multiLine":t.hasClass("multiline"),"suggestionsWidth":466}),i[e]=!0})}};$(".js-like").is(":visible")&&a(".js-like");var o=function(e){return $.ajax({"type":"POST","url":"/users/story/dismissonboarding/"+r,"data":{"fkey":StackExchange.options.user.fkey,"step":e}})},s=function(e){return function(){var t=$(".js-onboarding-complete");t.submit(),e&&$(".js-onboarding").remove()}},l=function(e,t){for(var n=0;n<t.length;n++)e.find(".js-error-"+t[n]).show(),e.find("label[for="+t[n]+"]").closest(".input-group").addClass("has-error"),$(".js-onboarding").on("keydown",":input",function(e){$(e.currentTarget).closest(".input-group").removeClass("has-error").find(".js-error").hide()})},c=function(e,t){var n=$(e);if($(".input-group").removeClass("has-error"),$(".js-error").hide(),n.closest(".step").toggleClass("hidden"),$(".hero-step-counter > .completed").toggleClass("hidden"),$(".hero-step-counter > .js-inactive").toggleClass("hidden"),t){$(".js-onboarding .js-step-2").toggleClass("hidden");var i=$('.js-onboarding-work-education input[type="radio"]:checked').data("wrapper-id");d(i)}else $(".js-onboarding .js-step-1").toggleClass("hidden")},u=function(e,t){var n,i=$(e),a=$(".js-onboarding");if(t){var o=$("input[name=add-xp]:checked").attr("id");n=$("#"+o+"-form")}else n=$("#step1form");return $.ajax({"type":"POST","url":"/users/story/"+r+"/onboarding/save","data":n.serialize()}).done(function(e){e.ModelErrors?(l(a,e.ModelErrors),t&&(i.removeClass("loading"),e.JobStoryItemId&&$("#JobStoryItemId").val(e.JobStoryItemId),e.EducationStoryItemId&&$("#EducationStoryItemId").val(e.EducationStoryItemId))):t?n.submit():c(i,!0),t||i.removeClass("loading")})},d=function(t){if("work-experience-wrapper"===t){a(".js-work-tags");var n=$(".autocomplete .js-company-autocomplete"),i=$("input[name='Tags']").next().find("input");e(n,i,n,function(e,t){$("input[name='CompanyName']").val(t.name),$("input[name='CompanyId']").val(t.companyId),$("input[name='ListId']").val(t.listId)})}else a(".js-school-tags")};$(".js-onboarding a.button, .js-onboarding a.btn-confirm").not(".js-prev").on("click",function(e){e.preventDefault();var t=$(e.currentTarget);t.addClass("loading");var n=!!t.data("save-first-item");u(t,n).always(function(){n||s()})}),$(".js-onboarding a.js-prev").on("click",function(e){e.preventDefault();var t=$(e.currentTarget);c(t,!1)}),$("input[type=radio][name=SearchStatus]").on("change",function(e){var t=$(e.target),n=$(".js-onboarding");"not-looking"===t.attr("id")?(n.find(".is-required").hide(),n.find(".js-job-recommendations input").prop("disabled",!0).prop("checked",!1),n.find(".js-job-recommendations").addClass("is-disabled")):(n.find(".is-required").show(),n.find(".js-job-recommendations input").prop("disabled",!1).prop("checked",!1),n.find(".js-job-recommendations").removeClass("is-disabled"))}),$("#search-status-menu").on("change",function(e){var t=$(e.target);"not-looking"===t.children(":selected").attr("id")?$(".js-onboarding").find(".is-required").hide():$(".js-onboarding").find(".is-required").show()}),$(".js-onboarding .hero-dismiss").on("click",function(e){$(".hero-step-counter").remove(),o($(e.currentTarget).closest(".step").data("step")).always(s(!0))}),$(".js-current-position, .js-current-education").on("click",function(e){var t=$(e.currentTarget),n=t.parent().prev(".js-enddate-select");n.prop("disabled",t.is(":checked"))}),$('.js-onboarding-work-education input[type="radio"]').on("click",function(e){$(".js-work-experience-wrapper, .js-education-wrapper").hide();var t=$(e.currentTarget).data("wrapper-id");$(".js-"+t).show(),d(t)}),$(".textarea-with-counter textarea").each(function(e,t){$(t).charCounter({"min":StackExchange.options.story.minCompleteBodyLength,"max":4e3,"target":$(t).closest(".textarea-with-counter").find(".-counter-span"),"ignoreWhitespace":!0,"setIsValid":function(e){var n=$(t).next(".-counter");n.toggleClass("-success",e),n.toggleClass("-fail",!e),n.find(".-counter-span").toggleClass("dno",e),n.find(".-success-span").toggleClass("dno",!e)}})})}};var i=!1;StackExchange.user.initJobsOnboarding=function(){if(!i){i=!0;var e=function(){var e=$(".js-location"),t=$(".js-location-place-id");if(e.length>0){var n=e[0],i={"types":["geocode"]};if(google&&google.maps){var r=new google.maps.places.Autocomplete(n,i);r.addListener("place_changed",function(){t.val("G:"+r.getPlace().place_id)})}e.typeWatch({"wait":10,"callback":function(){t.val("")},"highlight":!1,"captureLength":-1})}},t=function(e){StackExchange.tagEditor(e,void 0,void 0,{"multiLine":!0});var t=e.parent().find("div.tag-editor");e.hasClass("error")&&t.addClass("error"),t.find('input[type="text"]').on("focus",function(){t.addClass("focus"),t.removeClass("hover")}),t.find('input[type="text"]').on("focusout",function(){t.removeClass("focus")}),t.on("mouseenter",function(){t.hasClass("focus")||t.addClass("hover")}),t.on("mouseleave",function(){t.removeClass("hover")})},n=function(){StackExchange.using("tagEditor",function(){initTagRenderer("@Tag.RequiredTagsList(Current.Site).AsJavascriptString()".split(" "),"@Tag.ModeratorOnlyTagsList.AsJavascriptString()".split(" ")),$(".js-tags-liked:visible").length>0&&t($(".js-tags-liked")),$(".js-work-tags:visible").length>0&&t($(".js-work-tags")),$(".js-education-tags:visible").length>0&&t($(".js-education-tags"))})},r=function(e,t,n){e.length&&e.typeWatch({"highlight":!1,"wait":500,"captureLength":-1,"callback":function(){e.closest(".coverable-input.input-loader").addClass("loading");var i=$("#min-ds-form").data("user-id");$.ajax({"type":"POST","url":"/users/story/"+i+"/search-lists-autocomplete","data":{"query":e.val(),"fkey":StackExchange.options.user.fkey,"itemType":StackOverflow.Models.Story.UserStoryItemTypeId.Job}}).done(function(i){var r=e.closest(".autocomplete");r.find(".autocomplete-suggestions-list").remove(),e.closest(".coverable-input.input-loader").removeClass("loading");var a=$(i).insertAfter(e);$(".autocomplete-suggestion, .autocomplete-default").on("click",function(e){var i=$(e.currentTarget);if(i.hasClass("autocomplete-default"))return a.hide(),!1;var r=i.data("list-id"),o=i.find(".autocomplete-suggestion-match").text(),s=i.find(".autocomplete-suggestion-image [data-url]").data("url"),l=i.find(".autocomplete-suggestion-url").text();return n&&n(t,{"name":o,"imageUrl":s,"url":l,"listId":r}),a.hide(),!1}),e.is(":focus")||a.hide()})}})},a=function(){var e=$(".autocomplete .js-company-autocomplete");r(e,e,function(e,t){$("input[name='CompanyName']").val(t.name),$("input[name='ListId']").val(t.listId)})},o=function(){e(),n()},s=function(t,i,r){t.fadeOut("fast",function(){i.fadeIn("slow",function(){r?p($("#user-story-item-type").val()===$("#education-item").val()):(e(),n())})})},l=function(e,t){$(".input-group").removeClass("has-error"),$("div.tag-editor").removeClass("error"),$(".js-error").hide(),e.prop("disabled",!0),$(".js-step-counter .step.completed").toggleClass("hidden"),$(".js-step-counter .step.js-inactive").toggleClass("hidden"),$(".js-step-one").is(":visible")?s($(".js-step-one"),$(".js-step-two"),t):$(".js-step-two").is(":visible")&&s($(".js-step-two"),$(".js-step-one"),t),e.prop("disabled",!1)},c=function(e,t){for(var n=0;n<t.length;n++)e.find(".js-error-"+t[n]).show(),e.find("label[for="+t[n]+"]").closest(".input-group").addClass("has-error"),("LikedTags"===t[n]||"Tags"===t[n]||"EducationTags"===t[n])&&e.find("label[for="+t[n]+"]").parent().find("div.tag-editor").addClass("error");$(".js-onboarding").on("keydown",":input",function(e){var t=$(e.currentTarget).closest(".input-group");t.hasClass("js-tags")&&t.find("div.tag-editor").removeClass("error"),t.removeClass("has-error").find(".js-error").hide()}),$(".js-onboarding").on("click","select",function(e){var t=$(e.currentTarget).closest(".input-group");t.removeClass("has-error").find(".js-error").hide()})},u=function(e,t){var n=$("#min-ds-form"),i=$("#min-ds-form").data("user-id"),r=null;return $(".js-step-one").is(":visible")?$(".js-step-two input:hidden").prop("disabled",!0):$(".js-step-two").is(":visible")&&$(".js-step-one input:hidden").prop("disabled",!0),r=n.serialize(),$(".js-step-one").is(":visible")?$(".js-step-two input:hidden").prop("disabled",!1):$(".js-step-two").is(":visible")&&$(".js-step-one input:hidden").prop("disabled",!1),e.addClass("loading"),$.ajax({"type":"POST","url":"/users/story/"+i+"/onboarding/save","data":r}).done(function(i){t?i.ModelErrors?c(n,i.ModelErrors):l(e,!0):(i.ModelErrors&&c(n,i.ModelErrors),i.JobStoryItemId&&$("#JobStoryItemId").val(i.JobStoryItemId),i.EducationStoryItemId&&$("#EducationStoryItemId").val(i.EducationStoryItemId),i.redirectUrl&&window.location.replace(i.redirectUrl)),e.removeClass("loading")})},d=function(e){e.focus(),e.blur()},p=function(e){e?($("#user-story-item-type").val($("#education-item").val()),$(".js-onboarding-work-education #add-education").prop("checked",!0),$(".js-onboarding-work-education #add-work").prop("checked",!1),d($(".js-education-wrapper .textarea-with-counter textarea"))):($("#user-story-item-type").val($("#job-item").val()),$(".js-onboarding-work-education #add-work").prop("checked",!0),$(".js-onboarding-work-education #add-education").prop("checked",!1),d($(".js-work-experience-wrapper .textarea-with-counter textarea")),a()),n()},f=function(){$('.js-onboarding-work-education input[type="radio"]').on("click",function(e){$(".js-work-experience-wrapper, .js-education-wrapper").hide();var t=$(e.currentTarget).data("wrapper-id");$(".js-"+t).show(),"work-experience-wrapper"===t?p(!1):p(!0)}),$("#wizard-previous-btn").on("click",function(e){return l($(e.currentTarget),!1),!1}),$("#wizard-next-btn").on("click",function(e){return u($(e.currentTarget),!0),!1}),$("#wizard-done-btn").on("click",function(e){return u($(e.currentTarget),!1),!1}),$(".js-work-is-current, .js-education-is-current").on("click",function(e){var t=$(e.target),n=t.is(".js-work-is-current")?$(".js-work-end-year"):$(".js-education-end-year");t.is(":checked")?n.prop("disabled",!0):n.prop("disabled",!1)}),$(".js-work-end-year, .js-education-end-year").change(function(e){var t=$(e.currentTarget),n=t.is(".js-work-end-year")?$(".js-work-start-year"):$(".js-education-start-year"),i=t.is(".js-work-end-year")?$(".js-work-end-year"):$(".js-education-end-year"),r=parseInt(n.val(),10),a=parseInt(i.val(),10);r>a&&n.val(a)}),$(".js-work-start-year, .js-education-start-year").change(function(e){var t=$(e.currentTarget),n=t.is(".js-work-start-year")?$(".js-work-start-year"):$(".js-education-start-year"),i=t.is(".js-work-start-year")?$(".js-work-end-year"):$(".js-education-end-year");if(i.length>0){var r=parseInt(n.val(),10),a=parseInt(i.val(),10);r>a&&a>0&&i.val(r)}}),$(".textarea-with-counter textarea").each(function(e,t){$(t).charCounter({"min":StackExchange.options.story.minCompleteBodyLength,"max":4e3,"target":$(t).closest(".textarea-with-counter").find(".-counter-span"),"ignoreWhitespace":!0,"setIsValid":function(e){var n=$(t).next(".-counter");n.toggleClass("-success",e),n.toggleClass("-fail",!e),n.find(".-counter-span").toggleClass("dno",e),n.find(".-success-span").toggleClass("dno",!e)}})}),$("input[type=radio][name=SearchStatus]").on("change",function(e){var t=$(e.target),n=$(".js-onboarding");"SearchState-NotLooking"===t.attr("id")?(n.find(".js-job-recommendations input").prop("disabled",!0).prop("checked",!1),n.find(".js-job-recommendations").addClass("is-disabled")):(n.find(".js-job-recommendations input").prop("disabled",!1).prop("checked",!1),n.find(".js-job-recommendations").removeClass("is-disabled"))}),p($("#user-story-item-type").val()===$("#education-item").val())};o(),f()}};var r=!1;StackExchange.user.initJobSearchPreferences=function(){if(!r){r=!0,StackExchange.using("tagEditor",function(){StackExchange.tagEditor($("#technologies-like"),void 0,void 0,{"multiLine":!0,"suggestionsWidth":466,"id":"technologies-like-container"}),StackExchange.tagEditor($("#technologies-dislike"),void 0,void 0,{"multiLine":!0,"suggestionsWidth":466,"id":"technologies-dislike-container"})});var e=$("#location-widget"),t=$("#location-items"),n=$("#location-address"),i=$("#location-place-id"),a=$("#location-add"),o=$("#location-home-item"),s=$("#location-include-home"),l=$("#geo-tag-template").html(),c=t.data("initial")||[],u=$("input[name='SearchStatus']"),d=$(".js-salary");d.keydown(function(e){return e.key&&1===e.key.length&&!/[0-9]/.test(e.key)?!1:void 0}),s.change(function(e){$(e.currentTarget).is(":checked")?o.removeClass("dno"):o.addClass("dno")});var p=function(){t.find(".geo-tag").not(o).remove();for(var e=0;e<c.length;e++){var n=c[e],i=$.extend({"i":e,"NeedsVisaClass":n.NeedsVisa?"needs-visa":""},n);$(l.formatUnicorn(i)).appendTo(t)}};if(t.on("click",".delete-location",function(e){e.preventDefault();var t=$(e.target).closest(".geo-tag[data-index]");t.length&&1===c.splice(t.data("index"),1).length&&p()}),a.click(function(t){t.preventDefault();var n={};e.find("[data-property]").each(function(e,t){var i=$(t);
n[i.data("property")]=i.is("input[type=checkbox]")?i.is(":checked"):i.val(),i.val("").prop("checked",!1)}),c.push(n),p(),a.prop("disabled",!0)}),n.typeWatch({"wait":10,"callback":function(){i.val(""),a.prop("disabled",!0)},"highlight":!1,"captureLength":-1}),google&&google.maps){var f=new google.maps.places.Autocomplete(n[0],{"types":["geocode"]});f.addListener("place_changed",function(){var e=f.getPlace().address_components.reduce(function(e,t){return{"types":e.types.concat(t.types)}}).types;e.indexOf("country")>=0&&(i.val("G:"+f.getPlace().place_id),a.prop("disabled",!1))})}var h=function(e,t){e=e.chosen(t);var n=function(){var t=e.data("name");if(t){e.next().find(".search-choice-close").removeClass("search-choice-close").addClass("delete-tag");var n=e.parent();n.find('[name^="{0}["]'.formatUnicorn(t)).remove();var i=e.val()||[];$.each(i,function(e){$("<input>").attr({"type":"hidden","name":"{0}[{1}]".formatUnicorn(t,e),"value":i[e]}).appendTo(n)})}};e.change(n),n()};h($("#developer-types"),{"max_selected_options":2}),h($("#industries"),{"max_selected_options":4}),u.on("change",function(){u.each(function(e,t){var n=$(t),i=n.parent("label").siblings(".opt-in-message");n.is(":checked")?i.css("visibility","visible"):i.css("visibility","hidden")})});var g=function(e,t){e.siblings(".tag-editor").toggleClass("has-error",t),e.siblings(".error-message").toggle(t)},m={"technologies-like":StackExchange.options.story.likedTagsMaxLength,"technologies-dislike":StackExchange.options.story.dislikedTagsMaxLength};$("#technologies-like, #technologies-dislike").on("keydown keyup change paste",function(e){var t=$(e.target);g(t,t.val().length>m[t.attr("id")])});var v=$("form#jobPreferencesForm");v.on("submit",function(e){e.preventDefault();var t=v.serialize();return StackExchange.helpers.addSpinner($("#spinnerContainer")),$.ajax({"type":"POST","url":v.attr("action"),"data":t}).done(function(){window.location.href=window.location.href}).fail(function(e){if(400===e.status){var t=e.responseJSON;t.likedTagsTooLong&&g($("#technologies-like"),!0),t.dislikedTagsTooLong&&g($("#technologies-dislike"),!0),$("#tags").scrollIntoView()}else $("#save-error-message").show().scrollIntoView()}).always(function(){StackExchange.helpers.removeSpinner()}),!1})}};var a=function(e){return e.is(":visible")?e.css("display","none"):e.css("display","inline-block"),e},o=function(e,t,n){return t!==!0&&t!==!1&&(t=e.is(":hidden")),t?e.fadeIn("normal",n):e.hide(0,n),e},s=!1;StackExchange.user.initCvView=function(){if(!s){s=!0;var e=function(e){return e.closest(".subsection, .repeater, .section")},t=function(){$(document).on("click","a.more",function(t){var r=$(t.currentTarget),a=r.hasClass("after"),o=a?r.nextAll(".more"):r.prevAll(".more");n(o);var s=e($(t.currentTarget));i(s)})},n=function(e,t){var n=e.hasClass("inline");n?a(e):o(e,t),e.toggleClass("unhidden",t)},i=function(e){var t=e.find("a.more");if(0!=t.length){var n=e.find("div.more, span.more"),i=t.html(),r=t.data("fewer-text"),a=t.data("more-text");t.html(n.filter(":hidden").length?i.replace(r,a):i.replace(a,r)).toggleClass("expanded")}},r=function(){$(document).on("click",".repeater.collapsible > .toggle",function(e){u($(e.currentTarget).closest(".collapsible"))}),$(document).on("click","a.up-and-out",function(e){e.stopPropagation()})},l=function(){$(document).on("click","a.expand",function(e){var t=$(e.currentTarget),r=t.closest(".section"),a=r.find(".repeater"),o=r.find("div.more"),s=t.text()!==t.data("toggle-text");n(o,s),a.each(function(e,t){u($(t),s),$(t).find(".toggle-checkbox").prop("checked",s)}),c(r,s),i(r)})},c=function(e,t){var n=e.find("a.expand");n.data("original-text")||n.data("original-text",n.text()),t?n.text(n.data("toggle-text")):n.text(n.data("original-text"))},u=function(e,t){var n=e.find(".collapsible");null==t&&(t=!n.is(":visible")),o(n,t),e.toggleClass("expanded",t)};t(),r(),l()}},StackExchange.user.initListEditor=function(){var e=$("a.js-edit-list"),t=$("header.js-edit-list"),n=$("form.js-delete-list"),i=t.prev("header");e.click(function(e){e.preventDefault(),t.removeClass("hidden"),i.addClass("hidden")}),n.submit(function(e){e.preventDefault();var t=$(e.currentTarget);confirm("Are you sure you want to delete this list?")&&$.ajax({"type":"POST","url":t.attr("action"),"data":t.serialize()}).done(function(e){e.success&&$("#content").prepend(e.message)})});var r=function(e){var t=$(e),n=t.find("input"),i=t.find("img").not(".js-img-empty"),r={"empty":function(){t.find(".js-img-empty").removeClass("dno"),t.find(".js-img-preview").addClass("dno"),n.val("")},"showDialog":function(){StackExchange.imageUploader.createImageUploadBackground(),StackExchange.imageUploader.uploadImageDialog(function(e){e&&r.setImage(e),StackExchange.imageUploader.removeImageUploadBackground()})},"setImage":function(e){e?(n.val(e),i.attr("src",e),t.find(".js-img-empty").addClass("dno"),t.find(".js-img-preview").removeClass("dno")):r.empty()}};return r};t.on("click",".js-img-edit",function(e){e.preventDefault();var t=$(e.target),n=r(t.closest(".js-img-edit"));t.closest(".js-img-remove").length?n.empty():n.showDialog()}),$(".js-cancel-edit").click(function(e){e.preventDefault(),t.addClass("hidden"),i.removeClass("hidden")})};var l=!1;StackExchange.user.initJobRecommendations=function(e){if(!l){l=!0;var t=function(){$.ajax({"type":"POST","url":"/users/story/fetch-jobs-recommendations/"+StackExchange.user.options.userId,"data":{"source":e,"fkey":StackExchange.options.user.fkey}}).done(function(e){$(".js-jobs-recommendations").append(e)})},n=function(e){return $.ajax({"type":"POST","url":"/users/story/toggle-jobs-recommendations/"+StackExchange.user.options.userId,"data":{"fkey":StackExchange.options.user.fkey,"collapseJobs":e}})};$(document).on("click",".js-toggle-jobs",function(){var e=$(".js-sidebar-jobs-visible").hasClass("is-visible");n(e).always(function(){$(".js-sidebar-jobs-visible, .js-sidebar-jobs-hidden").toggleClass("is-visible is-hidden")})}),$(document).on("click",".js-jobs-recommendations a",function(t){var n=$(t.target).closest(".js-click-target"),i=n.data("target");StackExchange.using("gps",function(){StackExchange.gps.track("story_sidebar.jobs_recommendations.click",{"target":i,"source":e})})}),t()}}}(StackExchangeDevStory||(StackExchangeDevStory={}));var StackOverflow;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e[e.Job=1]="Job",e[e.PublicArtifact=2]="PublicArtifact",e[e.TopPost=3]="TopPost",e[e.AppsAndSoftware=4]="AppsAndSoftware",e[e.Education=5]="Education",e[e.Certification=6]="Certification",e[e.Generic=10]="Generic",e[e.AutoGenerated=99]="AutoGenerated",e[e.OpenSource=100]="OpenSource",e[e.Reading=200]="Reading"}(t=e.UserStoryItemTypeId||(e.UserStoryItemTypeId={}))}(t=e.Story||(e.Story={}))}(t=e.Models||(e.Models={}))}(StackOverflow||(StackOverflow={}));